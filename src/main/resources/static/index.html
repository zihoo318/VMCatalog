<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>템플릿 기반 VM 카탈로그</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
<!-- 상단 바 -->
<header class="topbar">
    <div class="container bar">
        <button id="btnHome" class="brand">
            <svg class="icon globe" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 3a9 9 0 100 18 9 9 0 000-18z"/>
            </svg>
            <span>템플릿 기반 VM 카탈로그</span>
        </button>
        <span class="subtle">오프라인 대응 • OpenStack + Terraform</span>
    </div>
</header>

<main class="container">
    <!-- 알림 -->
    <div id="alert" class="alert is-hidden"></div>

    <!-- 뷰: 카탈로그 -->
    <section id="viewCatalog" class="view">
        <h1 class="h1">카탈로그</h1>
        <div class="grid">
            <!-- Web 카드 -->
            <button class="card" id="cardWeb">
                <div class="card-inner">
                    <div class="card-head">
                        <div class="badge sky">
                            <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/></svg>
                        </div>
                        <div>
                            <div class="card-title">웹</div>
                            <div class="muted">Nginx 골든 이미지 • 비밀번호 로그인</div>
                        </div>
                    </div>

                    <p class="card-text">웹 VM 1대를 생성합니다. 이미지에 Nginx가 있으면 cloud-init이 활성화하고 테스트 페이지를 배포합니다.</p>

                    <!-- 가운데 채움: 구성 일러스트 + 핵심 포인트 -->
                    <div class="illus illus-web">
                        <!-- 간단 다이어그램 -->
                        <svg viewBox="0 0 300 160" aria-hidden="true">
                            <defs>
                                <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                                    <stop offset="0" stop-color="#bae6fd"/>
                                    <stop offset="1" stop-color="#e0f2fe"/>
                                </linearGradient>
                            </defs>
                            <rect x="8" y="10" width="284" height="140" rx="10" fill="url(#g1)" opacity="0.35"/>
                            <g fill="#0369a1" opacity="0.9">
                                <rect x="22" y="36" width="70" height="30" rx="6"/>
                                <rect x="115" y="36" width="70" height="30" rx="6"/>
                                <rect x="208" y="36" width="70" height="30" rx="6"/>
                            </g>
                            <text x="57"  y="56" text-anchor="middle" font-size="12" fill="#0c4a6e">템플릿</text>
                            <text x="150" y="56" text-anchor="middle" font-size="12" fill="#0c4a6e">Terraform</text>
                            <text x="243" y="56" text-anchor="middle" font-size="12" fill="#0c4a6e">OpenStack</text>
                            <path d="M92 51h20M185 51h20" stroke="#0ea5e9" stroke-width="3" stroke-linecap="round"/>
                            <g>
                                <rect x="70" y="95" width="160" height="40" rx="8" fill="#fff"/>
                                <rect x="78" y="102" width="144" height="10" rx="5" fill="#93c5fd"/>
                                <rect x="78" y="118" width="100" height="8" rx="4" fill="#bfdbfe"/>
                            </g>
                            <text x="150" y="90" text-anchor="middle" font-size="12" fill="#0c4a6e">VM 부팅 → Nginx 활성화</text>
                        </svg>

                        <ul class="spec">
                            <li>역할: 정적 웹 테스트</li>
                            <li>cloud-init: hostname, nginx enable, index.html 배포</li>
                            <li>보안그룹: 22/tcp(옵션), 80/tcp</li>
                        </ul>
                    </div>

                    <div class="cta sky">템플릿 사용
                        <svg class="icon" viewBox="0 0 24 24"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
                    </div>
                </div>
            </button>

            <!-- DB 카드 -->
            <button class="card" id="cardDb">
                <div class="card-inner">
                    <div class="card-head">
                        <div class="badge green">
                            <svg class="icon" viewBox="0 0 24 24"><path d="M4 6c0-2 4-4 8-4s8 2 8 4-4 4-8 4-8-2-8-4zM4 12c0-2 4-4 8-4s8 2 8 4M4 18c0 2 4 4 8 4s8-2 8-4"/></svg>
                        </div>
                        <div>
                            <div class="card-title">DB</div>
                            <div class="muted">MariaDB/MySQL 골든 이미지 • 비밀번호 로그인</div>
                        </div>
                    </div>

                    <p class="card-text">DB VM 1대를 생성합니다. 데이터 디렉터리를 준비하고 서비스가 있으면 활성화합니다.</p>

                    <div class="illus illus-db">
                        <svg viewBox="0 0 300 160" aria-hidden="true">
                            <defs>
                                <linearGradient id="g2" x1="0" y1="0" x2="1" y2="1">
                                    <stop offset="0" stop-color="#bbf7d0"/>
                                    <stop offset="1" stop-color="#dcfce7"/>
                                </linearGradient>
                            </defs>
                            <rect x="8" y="10" width="284" height="140" rx="10" fill="url(#g2)" opacity="0.35"/>
                            <!-- DB 실린더 -->
                            <ellipse cx="90" cy="54" rx="42" ry="12" fill="#10b981"/>
                            <rect   x="48" y="54" width="84" height="44" rx="8" fill="#34d399"/>
                            <ellipse cx="90" cy="98" rx="42" ry="12" fill="#10b981"/>
                            <!-- 데이터 볼륨 -->
                            <rect x="170" y="40" width="90" height="26" rx="6" fill="#86efac"/>
                            <text x="215" y="56" text-anchor="middle" font-size="12" fill="#065f46">/dev/vdb</text>
                            <path d="M132 70C170 70 170 70 170 53" stroke="#22c55e" stroke-width="3" fill="none"/>
                            <text x="150" y="120" text-anchor="middle" font-size="12" fill="#065f46">서비스 enable • 데이터 디렉터리 마운트</text>
                        </svg>

                        <ul class="spec">
                            <li>역할: 단일 DB 노드</li>
                            <li>cloud-init: 데이터 디렉터리 준비, 서비스 enable</li>
                            <li>포트: 3306/tcp 내부 전용</li>
                        </ul>
                    </div>

                    <div class="cta green">템플릿 사용
                        <svg class="icon" viewBox="0 0 24 24"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
                    </div>
                </div>
            </button>

            <!-- 인스턴스 목록 카드 -->
            <button class="card" id="cardInstances">
                <div class="card-inner">
                    <div class="card-head">
                        <div class="badge indigo">
                            <svg class="icon" viewBox="0 0 24 24"><path d="M6 4h12v4H6zM6 10h12v4H6zM6 16h12v4H6z"/></svg>
                        </div>
                        <div>
                            <div class="card-title">인스턴스 목록</div>
                            <div class="muted">연결된 OpenStack의 모든 VM 보기</div>
                        </div>
                    </div>

                    <p class="card-text">상태, IP, 콘솔 링크를 빠르게 확인합니다.</p>

                    <div class="illus illus-list">
                        <svg viewBox="0 0 300 160" aria-hidden="true">
                            <defs>
                                <linearGradient id="g3" x1="0" y1="0" x2="1" y2="1">
                                    <stop offset="0" stop-color="#c7d2fe"/>
                                    <stop offset="1" stop-color="#e0e7ff"/>
                                </linearGradient>
                            </defs>
                            <rect x="8" y="10" width="284" height="140" rx="10" fill="url(#g3)" opacity="0.35"/>
                            <g fill="#fff" stroke="#c7d2fe">
                                <rect x="28" y="38" width="244" height="24" rx="6"/>
                                <rect x="28" y="70" width="244" height="24" rx="6"/>
                                <rect x="28" y="102" width="244" height="24" rx="6"/>
                            </g>
                            <g>
                                <circle cx="42" cy="50" r="6" fill="#10b981"/>
                                <circle cx="42" cy="82" r="6" fill="#f59e0b"/>
                                <circle cx="42" cy="114" r="6" fill="#ef4444"/>
                            </g>
                            <text x="80" y="54" font-size="12" fill="#4338ca">web-01 • 10.0.0.15</text>
                            <text x="80" y="86" font-size="12" fill="#4338ca">db-01 • 10.0.0.23</text>
                            <text x="80" y="118" font-size="12" fill="#4338ca">api-01 • 10.0.0.31</text>
                        </svg>

                        <ul class="spec">
                            <li>상태: BUILD → ACTIVE</li>
                            <li>정보: 이름, IP, 콘솔 링크</li>
                        </ul>
                    </div>

                    <div class="cta indigo">목록 열기
                        <svg class="icon" viewBox="0 0 24 24"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
                    </div>
                </div>
            </button>
        </div>
    </section>

    <!-- 뷰: 생성 -->
    <section id="viewCreate" class="view is-hidden">
        <div class="toolbar">
            <button id="btnBackFromCreate" class="link">
                <svg class="icon" viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg> 뒤로
            </button>
            <h1 id="createTitle" class="h1">생성</h1>
        </div>

        <div class="panel">
            <div class="field">
                <label class="label">이름(호스트네임)</label>
                <input id="inputName" class="input" placeholder="web-01 또는 db-01" />
                <div class="help">OpenStack 인스턴스 이름과 게스트 OS 호스트네임 모두 이 값으로 설정됩니다.</div>
            </div>

            <div class="actions">
                <button id="btnCreate" class="btn primary">
                    <span class="spinner is-hidden" id="spinnerCreate"></span>
                    생성
                </button>
                <button id="btnCancelCreate" class="btn">취소</button>
            </div>
        </div>
    </section>

    <!-- 뷰: 인스턴스 -->
    <section id="viewInstances" class="view is-hidden">
        <div class="toolbar">
            <button id="btnBackFromInstances" class="link">
                <svg class="icon" viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg> 뒤로
            </button>
            <h1 class="h1">인스턴스</h1>
            <div class="spacer"></div>
            <button id="btnReload" class="btn ghost">
                <svg class="icon" viewBox="0 0 24 24"><path d="M4 4v6h6M20 20v-6h-6M5 19A8 8 0 1119 5"/></svg>
                새로고침
            </button>
        </div>

        <div id="instancesGrid" class="grid instances"></div>
        <div id="instancesEmpty" class="empty is-hidden">표시할 인스턴스가 없습니다.</div>
        <div id="instancesLoading" class="loading is-hidden">
            <span class="spinner"></span> 불러오는 중…
        </div>
        <div id="instancesError" class="error is-hidden"></div>
    </section>
</main>

<script src="app.js"></script>
</body>
</html>
